# 每日信息简报系统

一个自动化的每日信息简报系统，定时获取北京地区天气、生活指数、黄历、尾号限行等信息，并在上午9点推送到微信公众号。

## 功能特性

- 🌤️ **北京天气信息**：实时温度、天气状况、湿度、风力
- 📊 **生活指数**：穿衣、紫外线、洗车、感冒、运动、空气质量
- 📅 **今日黄历**：农历日期、宜忌事项、生肖星宿
- 🚗 **尾号限行**：北京地区当日限行尾号、时间、区域
- ⏰ **定时推送**：每天上午9点自动执行
- 💬 **微信公众号集成**：支持模板消息推送

## 系统架构

```
├── daily_briefing.py    # 主程序
├── config.py           # 配置文件
├── deploy.py           # 部署脚本
├── requirements.txt    # 依赖包
├── .env.example       # 环境变量示例
└── README.md          # 说明文档
```

## 快速开始

### 1. 环境要求

- Python 3.7+
- pip 包管理器

### 2. 安装依赖

```bash
pip install -r requirements.txt
```

### 3. 配置参数

复制环境变量配置文件：

```bash
cp .env.example .env
```

编辑 `.env` 文件，配置以下参数：

```env
# 微信公众号配置
WECHAT_APP_ID=your_wechat_app_id
WECHAT_APP_SECRET=your_wechat_app_secret
WECHAT_TEMPLATE_ID=your_template_id

# 天气API配置（可选，使用和风天气API）
WEATHER_API_KEY=your_weather_api_key
```

### 4. 部署和测试

```bash
python deploy.py
```

### 5. 启动系统

```bash
python daily_briefing.py
```

## API 配置说明

### 微信公众号配置

1. 注册微信公众平台账号
2. 获取 AppID 和 AppSecret
3. 创建消息模板，获取 Template ID

### 天气API配置（可选）

系统默认使用模拟数据，如需真实天气数据：

1. 注册和风天气开发者账号
2. 获取 API Key
3. 在 `.env` 文件中配置 `WEATHER_API_KEY`

## 定时任务

系统使用 `schedule` 库实现定时任务：

- **执行时间**：每天上午 9:00
- **任务内容**：获取所有信息并推送到微信公众号
- **调度方式**：每分钟检查一次任务状态

## 自定义配置

在 `config.py` 中可以修改以下配置：

```python
# 定时任务时间
SCHEDULE_TIME = "09:00"

# 日志级别
LOG_LEVEL = "INFO"

# 重试次数
MAX_RETRY = 3
```

## 消息格式示例

```
🌅 早安！今日信息简报 (2024-01-15 09:00)

🌤️ 北京天气
• 温度：8℃
• 天气：晴
• 湿度：45%
• 风力：北风3级

📊 生活指数
• 穿衣：较舒适
• 紫外线：中等
• 洗车：适宜
• 感冒：少发
• 运动：适宜
• 空气质量：良

📅 今日黄历
• 日期：2024年01月15日
• 农历：农历腊月廿三
• 宜：祭祀、祈福、求嗣、开光、出行
• 忌：破土、安葬、作灶
• 生肖：龙
• 星宿：心宿

🚗 尾号限行
• 日期：2024年01月15日 周一
• 限行尾号：1、6
• 限行时间：7:00-20:00
• 限行区域：五环路以内道路（不含五环路）

💡 温馨提示：注意天气变化，合理安排出行！
```

## 扩展功能

系统支持以下扩展：

1. **添加新的数据源**：在 `DailyBriefing` 类中添加新的数据获取方法
2. **自定义消息模板**：修改 `format_briefing_message` 方法
3. **多地区支持**：修改天气API的地区代码
4. **多平台推送**：扩展推送接口支持企业微信、钉钉等

## 故障排除

### 常见问题

1. **依赖安装失败**：检查Python版本和网络连接
2. **微信公众号推送失败**：检查AppID和AppSecret配置
3. **天气数据获取失败**：检查API密钥或网络连接

### 日志查看

系统运行日志保存在控制台输出，可通过修改 `LOG_LEVEL` 调整日志级别。

## 许可证

MIT License

## 贡献

欢迎提交 Issue 和 Pull Request！